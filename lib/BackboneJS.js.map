{"version":3,"file":"BackboneJS.js","sources":["src/Events.js","src/Utils/wrapError.js","src/Utils/urlError.js","src/Utils/Extend.js","src/Model.js","src/Collection.js","src/View.js","src/utils/urlError.js","src/Sync.js","src/AJAX.js","src/Router.js","src/History.js","src/BackboneJS.js"],"sourcesContent":["// Backbone.Events\n// ---------------\n\nimport _ from 'underscore';\n\n// A module that can be mixed in to *any object* in order to provide it with\n// a custom event channel. You may bind a callback to an event with `on` or\n// remove with `off`; `trigger`-ing an event fires all callbacks in\n// succession.\n//\n//     var object = {};\n//     _.extend(object, Backbone.Events);\n//     object.on('expand', function(){ alert('expanded'); });\n//     object.trigger('expand');\n//\nvar Events = {};\n\n// Regular expression used to split event strings.\nvar eventSplitter = /\\s+/;\n\n// A private global variable to share between listeners and listenees.\nvar _listening;\n\n// Iterates over the standard `event, callback` (as well as the fancy multiple\n// space-separated events `\"change blur\", callback` and jQuery-style event\n// maps `{event: callback}`).\nvar eventsApi = function(iteratee, events, name, callback, opts) {\n  var i = 0, names;\n  if (name && typeof name === 'object') {\n    // Handle event maps.\n    if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;\n    for (names = _.keys(name); i < names.length ; i++) {\n      events = eventsApi(iteratee, events, names[i], name[names[i]], opts);\n    }\n  } else if (name && eventSplitter.test(name)) {\n    // Handle space-separated event names by delegating them individually.\n    for (names = name.split(eventSplitter); i < names.length; i++) {\n      events = iteratee(events, names[i], callback, opts);\n    }\n  } else {\n    // Finally, standard events.\n    events = iteratee(events, name, callback, opts);\n  }\n  return events;\n};\n\n// Bind an event to a `callback` function. Passing `\"all\"` will bind\n// the callback to all events fired.\nEvents.on = function(name, callback, context) {\n  this._events = eventsApi(onApi, this._events || {}, name, callback, {\n    context: context,\n    ctx: this,\n    listening: _listening\n  });\n\n  if (_listening) {\n    var listeners = this._listeners || (this._listeners = {});\n    listeners[_listening.id] = _listening;\n    // Allow the listening to use a counter, instead of tracking\n    // callbacks for library interop\n    _listening.interop = false;\n  }\n\n  return this;\n};\n\n// Inversion-of-control versions of `on`. Tell *this* object to listen to\n// an event in another object... keeping track of what it's listening to\n// for easier unbinding later.\nEvents.listenTo = function(obj, name, callback) {\n  if (!obj) return this;\n  var id = obj._listenId || (obj._listenId = _.uniqueId('l'));\n  var listeningTo = this._listeningTo || (this._listeningTo = {});\n  var listening = _listening = listeningTo[id];\n\n  // This object is not listening to any other events on `obj` yet.\n  // Setup the necessary references to track the listening callbacks.\n  if (!listening) {\n    this._listenId || (this._listenId = _.uniqueId('l'));\n    listening = _listening = listeningTo[id] = new Listening(this, obj);\n  }\n\n  // Bind callbacks on obj.\n  var error = tryCatchOn(obj, name, callback, this);\n  _listening = void 0;\n\n  if (error) throw error;\n  // If the target obj is not Backbone.Events, track events manually.\n  if (listening.interop) listening.on(name, callback);\n\n  return this;\n};\n\n// The reducing API that adds a callback to the `events` object.\nvar onApi = function(events, name, callback, options) {\n  if (callback) {\n    var handlers = events[name] || (events[name] = []);\n    var context = options.context, ctx = options.ctx, listening = options.listening;\n    if (listening) listening.count++;\n\n    handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});\n  }\n  return events;\n};\n\n// An try-catch guarded #on function, to prevent poisoning the global\n// `_listening` variable.\nvar tryCatchOn = function(obj, name, callback, context) {\n  try {\n    obj.on(name, callback, context);\n  } catch (e) {\n    return e;\n  }\n};\n\n// Remove one or many callbacks. If `context` is null, removes all\n// callbacks with that function. If `callback` is null, removes all\n// callbacks for the event. If `name` is null, removes all bound\n// callbacks for all events.\nEvents.off = function(name, callback, context) {\n  if (!this._events) return this;\n  this._events = eventsApi(offApi, this._events, name, callback, {\n    context: context,\n    listeners: this._listeners\n  });\n\n  return this;\n};\n\n// Tell this object to stop listening to either specific events ... or\n// to every object it's currently listening to.\nEvents.stopListening = function(obj, name, callback) {\n  var listeningTo = this._listeningTo;\n  if (!listeningTo) return this;\n\n  var ids = obj ? [obj._listenId] : _.keys(listeningTo);\n  for (var i = 0; i < ids.length; i++) {\n    var listening = listeningTo[ids[i]];\n\n    // If listening doesn't exist, this object is not currently\n    // listening to obj. Break out early.\n    if (!listening) break;\n\n    listening.obj.off(name, callback, this);\n    if (listening.interop) listening.off(name, callback);\n  }\n  if (_.isEmpty(listeningTo)) this._listeningTo = void 0;\n\n  return this;\n};\n\n// The reducing API that removes a callback from the `events` object.\nvar offApi = function(events, name, callback, options) {\n  if (!events) return;\n\n  var context = options.context, listeners = options.listeners;\n  var i = 0, names;\n\n  // Delete all event listeners and \"drop\" events.\n  if (!name && !context && !callback) {\n    for (names = _.keys(listeners); i < names.length; i++) {\n      listeners[names[i]].cleanup();\n    }\n    return;\n  }\n\n  names = name ? [name] : _.keys(events);\n  for (; i < names.length; i++) {\n    name = names[i];\n    var handlers = events[name];\n\n    // Bail out if there are no events stored.\n    if (!handlers) break;\n\n    // Find any remaining events.\n    var remaining = [];\n    for (var j = 0; j < handlers.length; j++) {\n      var handler = handlers[j];\n      if (\n        callback && callback !== handler.callback &&\n          callback !== handler.callback._callback ||\n            context && context !== handler.context\n      ) {\n        remaining.push(handler);\n      } else {\n        var listening = handler.listening;\n        if (listening) listening.off(name, callback);\n      }\n    }\n\n    // Replace events if there are any remaining.  Otherwise, clean up.\n    if (remaining.length) {\n      events[name] = remaining;\n    } else {\n      delete events[name];\n    }\n  }\n\n  return events;\n};\n\n// Bind an event to only be triggered a single time. After the first time\n// the callback is invoked, its listener will be removed. If multiple events\n// are passed in using the space-separated syntax, the handler will fire\n// once for each event, not once for a combination of all events.\nEvents.once = function(name, callback, context) {\n  // Map the event into a `{event: once}` object.\n  var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));\n  if (typeof name === 'string' && context == null) callback = void 0;\n  return this.on(events, callback, context);\n};\n\n// Inversion-of-control versions of `once`.\nEvents.listenToOnce = function(obj, name, callback) {\n  // Map the event into a `{event: once}` object.\n  var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));\n  return this.listenTo(obj, events);\n};\n\n// Reduces the event callbacks into a map of `{event: onceWrapper}`.\n// `offer` unbinds the `onceWrapper` after it has been called.\nvar onceMap = function(map, name, callback, offer) {\n  if (callback) {\n    var once = map[name] = _.once(function() {\n      offer(name, once);\n      callback.apply(this, arguments);\n    });\n    once._callback = callback;\n  }\n  return map;\n};\n\n// Trigger one or many events, firing all bound callbacks. Callbacks are\n// passed the same arguments as `trigger` is, apart from the event name\n// (unless you're listening on `\"all\"`, which will cause your callback to\n// receive the true name of the event as the first argument).\nEvents.trigger = function(name) {\n  if (!this._events) return this;\n\n  var length = Math.max(0, arguments.length - 1);\n  var args = Array(length);\n  for (var i = 0; i < length; i++) args[i] = arguments[i + 1];\n\n  eventsApi(triggerApi, this._events, name, void 0, args);\n  return this;\n};\n\n// Handles triggering the appropriate event callbacks.\nvar triggerApi = function(objEvents, name, callback, args) {\n  if (objEvents) {\n    var events = objEvents[name];\n    var allEvents = objEvents.all;\n    if (events && allEvents) allEvents = allEvents.slice();\n    if (events) triggerEvents(events, args);\n    if (allEvents) triggerEvents(allEvents, [name].concat(args));\n  }\n  return objEvents;\n};\n\n// A difficult-to-believe, but optimized internal dispatch function for\n// triggering events. Tries to keep the usual cases speedy (most internal\n// Backbone events have 3 arguments).\nvar triggerEvents = function(events, args) {\n  var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];\n  switch (args.length) {\n    case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;\n    case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;\n    case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;\n    case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;\n    default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;\n  }\n};\n\n// A listening class that tracks and cleans up memory bindings\n// when all callbacks have been offed.\nvar Listening = function(listener, obj) {\n  this.id = listener._listenId;\n  this.listener = listener;\n  this.obj = obj;\n  this.interop = true;\n  this.count = 0;\n  this._events = void 0;\n};\n\nListening.prototype.on = Events.on;\n\n// Offs a callback (or several).\n// Uses an optimized counter if the listenee uses Backbone.Events.\n// Otherwise, falls back to manual tracking to support events\n// library interop.\nListening.prototype.off = function(name, callback) {\n  var cleanup;\n  if (this.interop) {\n    this._events = eventsApi(offApi, this._events, name, callback, {\n      context: void 0,\n      listeners: void 0\n    });\n    cleanup = !this._events;\n  } else {\n    this.count--;\n    cleanup = this.count === 0;\n  }\n  if (cleanup) this.cleanup();\n};\n\n// Cleans up memory bindings between the listener and the listenee.\nListening.prototype.cleanup = function() {\n  delete this.listener._listeningTo[this.obj._listenId];\n  if (!this.interop) delete this.obj._listeners[this.id];\n};\n\n// Aliases for backwards compatibility.\nEvents.bind   = Events.on;\nEvents.unbind = Events.off;\n\n// Export Public API\nexport default Events;\n","// Wrap an optional error callback with a fallback error event.\nvar wrapError = function(model, options) {\n  var error = options.error;\n  options.error = function(resp) {\n    if (error) error.call(options.context, model, resp, options);\n    model.trigger('error', model, resp, options);\n  };\n};\n\nexport default wrapError;\n","//\n//  urlError\n//\n\n// Throw an error when a URL is needed, and none is supplied.\n\nvar urlError = function() {\n  throw new Error('A \"url\" property or function must be specified');\n};\n\nexport default urlError;\n","// Helpers\n// -------\n\nimport _ from 'underscore';\n\n// Helper function to correctly set up the prototype chain for subclasses.\n// Similar to `goog.inherits`, but uses a hash of prototype properties and\n// class properties to be extended.\nvar extend = function(protoProps, staticProps) {\n  var parent = this;\n  var child;\n\n  // The constructor function for the new subclass is either defined by you\n  // (the \"constructor\" property in your `extend` definition), or defaulted\n  // by us to simply call the parent constructor.\n  if (protoProps && _.has(protoProps, 'constructor')) {\n    child = protoProps.constructor;\n  } else {\n    child = function(){ return parent.apply(this, arguments); };\n  }\n\n  // Add static properties to the constructor function, if supplied.\n  _.extend(child, parent, staticProps);\n\n  // Set the prototype chain to inherit from `parent`, without calling\n  // `parent`'s constructor function and add the prototype properties.\n  child.prototype = _.create(parent.prototype, protoProps);\n  child.prototype.constructor = child;\n\n  // Set a convenience property in case the parent's prototype is needed\n  // later.\n  child.__super__ = parent.prototype;\n\n  return child;\n};\n\nexport default extend;\n","// Backbone.Model\n// --------------\n\nimport _ from 'underscore';\n\nimport Events from './Events';\nimport wrapError from './Utils/wrapError';\nimport urlError from './Utils/urlError';\nimport extend from './Utils/Extend';\n\n// Backbone **Models** are the basic data object in the framework --\n// frequently representing a row in a table in a database on your server.\n// A discrete chunk of data and a bunch of useful, related methods for\n// performing computations and transformations on that data.\n\n// Create a new model with the specified attributes. A client id (`cid`)\n// is automatically generated and assigned for you.\nvar Model = function(attributes, options) {\n  var attrs = attributes || {};\n  options || (options = {});\n  this.preinitialize.apply(this, arguments);\n  this.cid = _.uniqueId(this.cidPrefix);\n  this.attributes = {};\n  if (options.collection) this.collection = options.collection;\n  if (options.parse) attrs = this.parse(attrs, options) || {};\n  var defaults = _.result(this, 'defaults');\n  attrs = _.defaults(_.extend({}, defaults, attrs), defaults);\n  this.set(attrs, options);\n  this.changed = {};\n  this.initialize.apply(this, arguments);\n};\n\n// Attach all inheritable methods to the Model prototype.\n_.extend(Model.prototype, Events, {\n\n  // A hash of attributes whose current and previous value differ.\n  changed: null,\n\n  // The value returned during the last failed validation.\n  validationError: null,\n\n  // The default name for the JSON `id` attribute is `\"id\"`. MongoDB and\n  // CouchDB users may want to set this to `\"_id\"`.\n  idAttribute: 'id',\n\n  // The prefix is used to create the client id which is used to identify models locally.\n  // You may want to override this if you're experiencing name clashes with model ids.\n  cidPrefix: 'c',\n\n  // preinitialize is an empty function by default. You can override it with a function\n  // or object.  preinitialize will run before any instantiation logic is run in the Model.\n  preinitialize: function(){},\n\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic.\n  initialize: function(){},\n\n  // Return a copy of the model's `attributes` object.\n  toJSON: function(options) {\n    return _.clone(this.attributes);\n  },\n\n  // Proxy `Backbone.sync` by default -- but override this if you need\n  // custom syncing semantics for *this* particular model.\n  sync: function() {\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  // Get the value of an attribute.\n  get: function(attr) {\n    return this.attributes[attr];\n  },\n\n  // Get the HTML-escaped value of an attribute.\n  escape: function(attr) {\n    return _.escape(this.get(attr));\n  },\n\n  // Returns `true` if the attribute contains a value that is not null\n  // or undefined.\n  has: function(attr) {\n    return this.get(attr) != null;\n  },\n\n  // Special-cased proxy to underscore's `_.matches` method.\n  matches: function(attrs) {\n    return !!_.iteratee(attrs, this)(this.attributes);\n  },\n\n  // Set a hash of model attributes on the object, firing `\"change\"`. This is\n  // the core primitive operation of a model, updating the data and notifying\n  // anyone who needs to know about the change in state. The heart of the beast.\n  set: function(key, val, options) {\n    if (key == null) return this;\n\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    var attrs;\n    if (typeof key === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    options || (options = {});\n\n    // Run validation.\n    if (!this._validate(attrs, options)) return false;\n\n    // Extract attributes and options.\n    var unset      = options.unset;\n    var silent     = options.silent;\n    var changes    = [];\n    var changing   = this._changing;\n    this._changing = true;\n\n    if (!changing) {\n      this._previousAttributes = _.clone(this.attributes);\n      this.changed = {};\n    }\n\n    var current = this.attributes;\n    var changed = this.changed;\n    var prev    = this._previousAttributes;\n\n    // For each `set` attribute, update or delete the current value.\n    for (var attr in attrs) {\n      val = attrs[attr];\n      if (!_.isEqual(current[attr], val)) changes.push(attr);\n      if (!_.isEqual(prev[attr], val)) {\n        changed[attr] = val;\n      } else {\n        delete changed[attr];\n      }\n      unset ? delete current[attr] : current[attr] = val;\n    }\n\n    // Update the `id`.\n    if (this.idAttribute in attrs) this.id = this.get(this.idAttribute);\n\n    // Trigger all relevant attribute changes.\n    if (!silent) {\n      if (changes.length) this._pending = options;\n      for (var i = 0; i < changes.length; i++) {\n        this.trigger('change:' + changes[i], this, current[changes[i]], options);\n      }\n    }\n\n    // You might be wondering why there's a `while` loop here. Changes can\n    // be recursively nested within `\"change\"` events.\n    if (changing) return this;\n    if (!silent) {\n      while (this._pending) {\n        options = this._pending;\n        this._pending = false;\n        this.trigger('change', this, options);\n      }\n    }\n    this._pending = false;\n    this._changing = false;\n    return this;\n  },\n\n  // Remove an attribute from the model, firing `\"change\"`. `unset` is a noop\n  // if the attribute doesn't exist.\n  unset: function(attr, options) {\n    return this.set(attr, void 0, _.extend({}, options, {unset: true}));\n  },\n\n  // Clear all attributes on the model, firing `\"change\"`.\n  clear: function(options) {\n    var attrs = {};\n    for (var key in this.attributes) attrs[key] = void 0;\n    return this.set(attrs, _.extend({}, options, {unset: true}));\n  },\n\n  // Determine if the model has changed since the last `\"change\"` event.\n  // If you specify an attribute name, determine if that attribute has changed.\n  hasChanged: function(attr) {\n    if (attr == null) return !_.isEmpty(this.changed);\n    return _.has(this.changed, attr);\n  },\n\n  // Return an object containing all the attributes that have changed, or\n  // false if there are no changed attributes. Useful for determining what\n  // parts of a view need to be updated and/or what attributes need to be\n  // persisted to the server. Unset attributes will be set to undefined.\n  // You can also pass an attributes object to diff against the model,\n  // determining if there *would be* a change.\n  changedAttributes: function(diff) {\n    if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;\n    var old = this._changing ? this._previousAttributes : this.attributes;\n    var changed = {};\n    var hasChanged;\n    for (var attr in diff) {\n      var val = diff[attr];\n      if (_.isEqual(old[attr], val)) continue;\n      changed[attr] = val;\n      hasChanged = true;\n    }\n    return hasChanged ? changed : false;\n  },\n\n  // Get the previous value of an attribute, recorded at the time the last\n  // `\"change\"` event was fired.\n  previous: function(attr) {\n    if (attr == null || !this._previousAttributes) return null;\n    return this._previousAttributes[attr];\n  },\n\n  // Get all of the attributes of the model at the time of the previous\n  // `\"change\"` event.\n  previousAttributes: function() {\n    return _.clone(this._previousAttributes);\n  },\n\n  // Fetch the model from the server, merging the response with the model's\n  // local attributes. Any changed attributes will trigger a \"change\" event.\n  fetch: function(options) {\n    options = _.extend({parse: true}, options);\n    var model = this;\n    var success = options.success;\n    options.success = function(resp) {\n      var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n      if (!model.set(serverAttrs, options)) return false;\n      if (success) success.call(options.context, model, resp, options);\n      model.trigger('sync', model, resp, options);\n    };\n    wrapError(this, options);\n    return this.sync('read', this, options);\n  },\n\n  // Set a hash of model attributes, and sync the model to the server.\n  // If the server returns an attributes hash that differs, the model's\n  // state will be `set` again.\n  save: function(key, val, options) {\n    // Handle both `\"key\", value` and `{key: value}` -style arguments.\n    var attrs;\n    if (key == null || typeof key === 'object') {\n      attrs = key;\n      options = val;\n    } else {\n      (attrs = {})[key] = val;\n    }\n\n    options = _.extend({validate: true, parse: true}, options);\n    var wait = options.wait;\n\n    // If we're not waiting and attributes exist, save acts as\n    // `set(attr).save(null, opts)` with validation. Otherwise, check if\n    // the model will be valid when the attributes, if any, are set.\n    if (attrs && !wait) {\n      if (!this.set(attrs, options)) return false;\n    } else if (!this._validate(attrs, options)) {\n      return false;\n    }\n\n    // After a successful server-side save, the client is (optionally)\n    // updated with the server-side state.\n    var model = this;\n    var success = options.success;\n    var attributes = this.attributes;\n    options.success = function(resp) {\n      // Ensure attributes are restored during synchronous saves.\n      model.attributes = attributes;\n      var serverAttrs = options.parse ? model.parse(resp, options) : resp;\n      if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);\n      if (serverAttrs && !model.set(serverAttrs, options)) return false;\n      if (success) success.call(options.context, model, resp, options);\n      model.trigger('sync', model, resp, options);\n    };\n    wrapError(this, options);\n\n    // Set temporary attributes if `{wait: true}` to properly find new ids.\n    if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);\n\n    var method = this.isNew() ? 'create' : options.patch ? 'patch' : 'update';\n    if (method === 'patch' && !options.attrs) options.attrs = attrs;\n    var xhr = this.sync(method, this, options);\n\n    // Restore attributes.\n    this.attributes = attributes;\n\n    return xhr;\n  },\n\n  // Destroy this model on the server if it was already persisted.\n  // Optimistically removes the model from its collection, if it has one.\n  // If `wait: true` is passed, waits for the server to respond before removal.\n  destroy: function(options) {\n    options = options ? _.clone(options) : {};\n    var model = this;\n    var success = options.success;\n    var wait = options.wait;\n\n    var destroy = function() {\n      model.stopListening();\n      model.trigger('destroy', model, model.collection, options);\n    };\n\n    options.success = function(resp) {\n      if (wait) destroy();\n      if (success) success.call(options.context, model, resp, options);\n      if (!model.isNew()) model.trigger('sync', model, resp, options);\n    };\n\n    var xhr = false;\n    if (this.isNew()) {\n      _.defer(options.success);\n    } else {\n      wrapError(this, options);\n      xhr = this.sync('delete', this, options);\n    }\n    if (!wait) destroy();\n    return xhr;\n  },\n\n  // Default URL for the model's representation on the server -- if you're\n  // using Backbone's restful methods, override this to change the endpoint\n  // that will be called.\n  url: function() {\n    var base =\n      _.result(this, 'urlRoot') ||\n      _.result(this.collection, 'url') ||\n      urlError();\n    if (this.isNew()) return base;\n    var id = this.get(this.idAttribute);\n    return base.replace(/[^\\/]$/, '$&/') + encodeURIComponent(id);\n  },\n\n  // **parse** converts a response into the hash of attributes to be `set` on\n  // the model. The default implementation is just to pass the response along.\n  parse: function(resp, options) {\n    return resp;\n  },\n\n  // Create a new model with identical attributes to this one.\n  clone: function() {\n    return new this.constructor(this.attributes);\n  },\n\n  // A model is new if it has never been saved to the server, and lacks an id.\n  isNew: function() {\n    return !this.has(this.idAttribute);\n  },\n\n  // Check if the model is currently in a valid state.\n  isValid: function(options) {\n    return this._validate({}, _.extend({}, options, {validate: true}));\n  },\n\n  // Run validation against the next complete set of model attributes,\n  // returning `true` if all is well. Otherwise, fire an `\"invalid\"` event.\n  _validate: function(attrs, options) {\n    if (!options.validate || !this.validate) return true;\n    attrs = _.extend({}, this.attributes, attrs);\n    var error = this.validationError = this.validate(attrs, options) || null;\n    if (!error) return true;\n    this.trigger('invalid', this, error, _.extend(options, {validationError: error}));\n    return false;\n  }\n\n});\n\n// Set up inheritance for the model, collection, router, view and history.\nModel.extend = extend;\n\nexport default Model;\n","// Backbone.Collection\n// -------------------\n\nimport _ from 'underscore';\n\nimport Events from './Events';\nimport Model from './Model';\nimport wrapError from './Utils/wrapError';\nimport extend from './Utils/Extend';\n\n// If models tend to represent a single row of data, a Backbone Collection is\n// more analogous to a table full of data ... or a small slice or page of that\n// table, or a collection of rows that belong together for a particular reason\n// -- all of the messages in this particular folder, all of the documents\n// belonging to this particular author, and so on. Collections maintain\n// indexes of their models, both in order, and for lookup by `id`.\n\n// Create a new **Collection**, perhaps to contain a specific type of `model`.\n// If a `comparator` is specified, the Collection will maintain\n// its models in sort order, as they're added and removed.\nvar Collection = function(models, options) {\n  options || (options = {});\n  this.preinitialize.apply(this, arguments);\n  if (options.model) this.model = options.model;\n  if (options.comparator !== void 0) this.comparator = options.comparator;\n  this._reset();\n  this.initialize.apply(this, arguments);\n  if (models) this.reset(models, _.extend({silent: true}, options));\n};\n\n// Default options for `Collection#set`.\nvar setOptions = {add: true, remove: true, merge: true};\nvar addOptions = {add: true, remove: false};\n\n// Splices `insert` into `array` at index `at`.\nvar splice = function(array, insert, at) {\n  at = Math.min(Math.max(at, 0), array.length);\n  var tail = Array(array.length - at);\n  var length = insert.length;\n  var i;\n  for (i = 0; i < tail.length; i++) tail[i] = array[i + at];\n  for (i = 0; i < length; i++) array[i + at] = insert[i];\n  for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];\n};\n\n// Define the Collection's inheritable methods.\n_.extend(Collection.prototype, Events, {\n\n  // The default model for a collection is just a **Backbone.Model**.\n  // This should be overridden in most cases.\n  model: Model,\n\n\n  // preinitialize is an empty function by default. You can override it with a function\n  // or object.  preinitialize will run before any instantiation logic is run in the Collection.\n  preinitialize: function(){},\n\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic.\n  initialize: function(){},\n\n  // The JSON representation of a Collection is an array of the\n  // models' attributes.\n  toJSON: function(options) {\n    return this.map(function(model) { return model.toJSON(options); });\n  },\n\n  // Proxy `Backbone.sync` by default.\n  sync: function() {\n    return Backbone.sync.apply(this, arguments);\n  },\n\n  // Add a model, or list of models to the set. `models` may be Backbone\n  // Models or raw JavaScript objects to be converted to Models, or any\n  // combination of the two.\n  add: function(models, options) {\n    return this.set(models, _.extend({merge: false}, options, addOptions));\n  },\n\n  // Remove a model, or a list of models from the set.\n  remove: function(models, options) {\n    options = _.extend({}, options);\n    var singular = !_.isArray(models);\n    models = singular ? [models] : models.slice();\n    var removed = this._removeModels(models, options);\n    if (!options.silent && removed.length) {\n      options.changes = {added: [], merged: [], removed: removed};\n      this.trigger('update', this, options);\n    }\n    return singular ? removed[0] : removed;\n  },\n\n  // Update a collection by `set`-ing a new list of models, adding new ones,\n  // removing models that are no longer present, and merging models that\n  // already exist in the collection, as necessary. Similar to **Model#set**,\n  // the core operation for updating the data contained by the collection.\n  set: function(models, options) {\n    if (models == null) return;\n\n    options = _.extend({}, setOptions, options);\n    if (options.parse && !this._isModel(models)) {\n      models = this.parse(models, options) || [];\n    }\n\n    var singular = !_.isArray(models);\n    models = singular ? [models] : models.slice();\n\n    var at = options.at;\n    if (at != null) at = +at;\n    if (at > this.length) at = this.length;\n    if (at < 0) at += this.length + 1;\n\n    var set = [];\n    var toAdd = [];\n    var toMerge = [];\n    var toRemove = [];\n    var modelMap = {};\n\n    var add = options.add;\n    var merge = options.merge;\n    var remove = options.remove;\n\n    var sort = false;\n    var sortable = this.comparator && at == null && options.sort !== false;\n    var sortAttr = _.isString(this.comparator) ? this.comparator : null;\n\n    // Turn bare objects into model references, and prevent invalid models\n    // from being added.\n    var model, i;\n    for (i = 0; i < models.length; i++) {\n      model = models[i];\n\n      // If a duplicate is found, prevent it from being added and\n      // optionally merge it into the existing model.\n      var existing = this.get(model);\n      if (existing) {\n        if (merge && model !== existing) {\n          var attrs = this._isModel(model) ? model.attributes : model;\n          if (options.parse) attrs = existing.parse(attrs, options);\n          existing.set(attrs, options);\n          toMerge.push(existing);\n          if (sortable && !sort) sort = existing.hasChanged(sortAttr);\n        }\n        if (!modelMap[existing.cid]) {\n          modelMap[existing.cid] = true;\n          set.push(existing);\n        }\n        models[i] = existing;\n\n      // If this is a new, valid model, push it to the `toAdd` list.\n      } else if (add) {\n        model = models[i] = this._prepareModel(model, options);\n        if (model) {\n          toAdd.push(model);\n          this._addReference(model, options);\n          modelMap[model.cid] = true;\n          set.push(model);\n        }\n      }\n    }\n\n    // Remove stale models.\n    if (remove) {\n      for (i = 0; i < this.length; i++) {\n        model = this.models[i];\n        if (!modelMap[model.cid]) toRemove.push(model);\n      }\n      if (toRemove.length) this._removeModels(toRemove, options);\n    }\n\n    // See if sorting is needed, update `length` and splice in new models.\n    var orderChanged = false;\n    var replace = !sortable && add && remove;\n    if (set.length && replace) {\n      orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {\n        return m !== set[index];\n      });\n      this.models.length = 0;\n      splice(this.models, set, 0);\n      this.length = this.models.length;\n    } else if (toAdd.length) {\n      if (sortable) sort = true;\n      splice(this.models, toAdd, at == null ? this.length : at);\n      this.length = this.models.length;\n    }\n\n    // Silently sort the collection if appropriate.\n    if (sort) this.sort({silent: true});\n\n    // Unless silenced, it's time to fire all appropriate add/sort/update events.\n    if (!options.silent) {\n      for (i = 0; i < toAdd.length; i++) {\n        if (at != null) options.index = at + i;\n        model = toAdd[i];\n        model.trigger('add', model, this, options);\n      }\n      if (sort || orderChanged) this.trigger('sort', this, options);\n      if (toAdd.length || toRemove.length || toMerge.length) {\n        options.changes = {\n          added: toAdd,\n          removed: toRemove,\n          merged: toMerge\n        };\n        this.trigger('update', this, options);\n      }\n    }\n\n    // Return the added (or merged) model (or models).\n    return singular ? models[0] : models;\n  },\n\n  // When you have more items than you want to add or remove individually,\n  // you can reset the entire set with a new list of models, without firing\n  // any granular `add` or `remove` events. Fires `reset` when finished.\n  // Useful for bulk operations and optimizations.\n  reset: function(models, options) {\n    options = options ? _.clone(options) : {};\n    for (var i = 0; i < this.models.length; i++) {\n      this._removeReference(this.models[i], options);\n    }\n    options.previousModels = this.models;\n    this._reset();\n    models = this.add(models, _.extend({silent: true}, options));\n    if (!options.silent) this.trigger('reset', this, options);\n    return models;\n  },\n\n  // Add a model to the end of the collection.\n  push: function(model, options) {\n    return this.add(model, _.extend({at: this.length}, options));\n  },\n\n  // Remove a model from the end of the collection.\n  pop: function(options) {\n    var model = this.at(this.length - 1);\n    return this.remove(model, options);\n  },\n\n  // Add a model to the beginning of the collection.\n  unshift: function(model, options) {\n    return this.add(model, _.extend({at: 0}, options));\n  },\n\n  // Remove a model from the beginning of the collection.\n  shift: function(options) {\n    var model = this.at(0);\n    return this.remove(model, options);\n  },\n\n  // Slice out a sub-array of models from the collection.\n  slice: function() {\n    return Array.prototype.slice.apply(this.models, arguments);\n  },\n\n  // Get a model from the set by id, cid, model object with id or cid\n  // properties, or an attributes object that is transformed through modelId.\n  get: function(obj) {\n    if (obj == null) return void 0;\n    return this._byId[obj] ||\n      this._byId[this.modelId(this._isModel(obj) ? obj.attributes : obj)] ||\n      obj.cid && this._byId[obj.cid];\n  },\n\n  // Returns `true` if the model is in the collection.\n  has: function(obj) {\n    return this.get(obj) != null;\n  },\n\n  // Get the model at the given index.\n  at: function(index) {\n    if (index < 0) index += this.length;\n    return this.models[index];\n  },\n\n  // Return models with matching attributes. Useful for simple cases of\n  // `filter`.\n  where: function(attrs, first) {\n    return this[first ? 'find' : 'filter'](attrs);\n  },\n\n  // Return the first model with matching attributes. Useful for simple cases\n  // of `find`.\n  findWhere: function(attrs) {\n    return this.where(attrs, true);\n  },\n\n  // Force the collection to re-sort itself. You don't need to call this under\n  // normal circumstances, as the set will maintain sort order as each item\n  // is added.\n  sort: function(options) {\n    var comparator = this.comparator;\n    if (!comparator) throw new Error('Cannot sort a set without a comparator');\n    options || (options = {});\n\n    var length = comparator.length;\n    if (_.isFunction(comparator)) comparator = _.bind(comparator, this);\n\n    // Run sort based on type of `comparator`.\n    if (length === 1 || _.isString(comparator)) {\n      this.models = this.sortBy(comparator);\n    } else {\n      this.models.sort(comparator);\n    }\n    if (!options.silent) this.trigger('sort', this, options);\n    return this;\n  },\n\n  // Pluck an attribute from each model in the collection.\n  pluck: function(attr) {\n    return this.map(attr + '');\n  },\n\n  // Fetch the default set of models for this collection, resetting the\n  // collection when they arrive. If `reset: true` is passed, the response\n  // data will be passed through the `reset` method instead of `set`.\n  fetch: function(options) {\n    options = _.extend({parse: true}, options);\n    var success = options.success;\n    var collection = this;\n    options.success = function(resp) {\n      var method = options.reset ? 'reset' : 'set';\n      collection[method](resp, options);\n      if (success) success.call(options.context, collection, resp, options);\n      collection.trigger('sync', collection, resp, options);\n    };\n    wrapError(this, options);\n    return this.sync('read', this, options);\n  },\n\n  // Create a new instance of a model in this collection. Add the model to the\n  // collection immediately, unless `wait: true` is passed, in which case we\n  // wait for the server to agree.\n  create: function(model, options) {\n    options = options ? _.clone(options) : {};\n    var wait = options.wait;\n    model = this._prepareModel(model, options);\n    if (!model) return false;\n    if (!wait) this.add(model, options);\n    var collection = this;\n    var success = options.success;\n    options.success = function(m, resp, callbackOpts) {\n      if (wait) collection.add(m, callbackOpts);\n      if (success) success.call(callbackOpts.context, m, resp, callbackOpts);\n    };\n    model.save(null, options);\n    return model;\n  },\n\n  // **parse** converts a response into a list of models to be added to the\n  // collection. The default implementation is just to pass it through.\n  parse: function(resp, options) {\n    return resp;\n  },\n\n  // Create a new collection with an identical list of models as this one.\n  clone: function() {\n    return new this.constructor(this.models, {\n      model: this.model,\n      comparator: this.comparator\n    });\n  },\n\n  // Define how to uniquely identify models in the collection.\n  modelId: function(attrs) {\n    return attrs[this.model.prototype.idAttribute || 'id'];\n  },\n\n  // Get an iterator of all models in this collection.\n  values: function() {\n    return new CollectionIterator(this, ITERATOR_VALUES);\n  },\n\n  // Get an iterator of all model IDs in this collection.\n  keys: function() {\n    return new CollectionIterator(this, ITERATOR_KEYS);\n  },\n\n  // Get an iterator of all [ID, model] tuples in this collection.\n  entries: function() {\n    return new CollectionIterator(this, ITERATOR_KEYSVALUES);\n  },\n\n  // Private method to reset all internal state. Called when the collection\n  // is first initialized or reset.\n  _reset: function() {\n    this.length = 0;\n    this.models = [];\n    this._byId  = {};\n  },\n\n  // Prepare a hash of attributes (or other model) to be added to this\n  // collection.\n  _prepareModel: function(attrs, options) {\n    if (this._isModel(attrs)) {\n      if (!attrs.collection) attrs.collection = this;\n      return attrs;\n    }\n    options = options ? _.clone(options) : {};\n    options.collection = this;\n    var model = new this.model(attrs, options);\n    if (!model.validationError) return model;\n    this.trigger('invalid', this, model.validationError, options);\n    return false;\n  },\n\n  // Internal method called by both remove and set.\n  _removeModels: function(models, options) {\n    var removed = [];\n    for (var i = 0; i < models.length; i++) {\n      var model = this.get(models[i]);\n      if (!model) continue;\n\n      var index = this.indexOf(model);\n      this.models.splice(index, 1);\n      this.length--;\n\n      // Remove references before triggering 'remove' event to prevent an\n      // infinite loop. #3693\n      delete this._byId[model.cid];\n      var id = this.modelId(model.attributes);\n      if (id != null) delete this._byId[id];\n\n      if (!options.silent) {\n        options.index = index;\n        model.trigger('remove', model, this, options);\n      }\n\n      removed.push(model);\n      this._removeReference(model, options);\n    }\n    return removed;\n  },\n\n  // Method for checking whether an object should be considered a model for\n  // the purposes of adding to the collection.\n  _isModel: function(model) {\n    return model instanceof Model;\n  },\n\n  // Internal method to create a model's ties to a collection.\n  _addReference: function(model, options) {\n    this._byId[model.cid] = model;\n    var id = this.modelId(model.attributes);\n    if (id != null) this._byId[id] = model;\n    model.on('all', this._onModelEvent, this);\n  },\n\n  // Internal method to sever a model's ties to a collection.\n  _removeReference: function(model, options) {\n    delete this._byId[model.cid];\n    var id = this.modelId(model.attributes);\n    if (id != null) delete this._byId[id];\n    if (this === model.collection) delete model.collection;\n    model.off('all', this._onModelEvent, this);\n  },\n\n  // Internal method called every time a model in the set fires an event.\n  // Sets need to update their indexes when models change ids. All other\n  // events simply proxy through. \"add\" and \"remove\" events that originate\n  // in other collections are ignored.\n  _onModelEvent: function(event, model, collection, options) {\n    if (model) {\n      if ((event === 'add' || event === 'remove') && collection !== this) return;\n      if (event === 'destroy') this.remove(model, options);\n      if (event === 'change') {\n        var prevId = this.modelId(model.previousAttributes());\n        var id = this.modelId(model.attributes);\n        if (prevId !== id) {\n          if (prevId != null) delete this._byId[prevId];\n          if (id != null) this._byId[id] = model;\n        }\n      }\n    }\n    this.trigger.apply(this, arguments);\n  }\n\n});\n\n// Defining an @@iterator method implements JavaScript's Iterable protocol.\n// In modern ES2015 browsers, this value is found at Symbol.iterator.\n/* global Symbol */\nvar $$iterator = typeof Symbol === 'function' && Symbol.iterator;\nif ($$iterator) {\n  Collection.prototype[$$iterator] = Collection.prototype.values;\n}\n\n// CollectionIterator\n// ------------------\n\n// A CollectionIterator implements JavaScript's Iterator protocol, allowing the\n// use of `for of` loops in modern browsers and interoperation between\n// Backbone.Collection and other JavaScript functions and third-party libraries\n// which can operate on Iterables.\nvar CollectionIterator = function(collection, kind) {\n  this._collection = collection;\n  this._kind = kind;\n  this._index = 0;\n};\n\n// This \"enum\" defines the three possible kinds of values which can be emitted\n// by a CollectionIterator that correspond to the values(), keys() and entries()\n// methods on Collection, respectively.\nvar ITERATOR_VALUES = 1;\nvar ITERATOR_KEYS = 2;\nvar ITERATOR_KEYSVALUES = 3;\n\n// All Iterators should themselves be Iterable.\nif ($$iterator) {\n  CollectionIterator.prototype[$$iterator] = function() {\n    return this;\n  };\n}\n\nCollectionIterator.prototype.next = function() {\n  if (this._collection) {\n\n    // Only continue iterating if the iterated collection is long enough.\n    if (this._index < this._collection.length) {\n      var model = this._collection.at(this._index);\n      this._index++;\n\n      // Construct a value depending on what kind of values should be iterated.\n      var value;\n      if (this._kind === ITERATOR_VALUES) {\n        value = model;\n      } else {\n        var id = this._collection.modelId(model.attributes);\n        if (this._kind === ITERATOR_KEYS) {\n          value = id;\n        } else { // ITERATOR_KEYSVALUES\n          value = [id, model];\n        }\n      }\n      return {value: value, done: false};\n    }\n\n    // Once exhausted, remove the reference to the collection so future\n    // calls to the next method always return done.\n    this._collection = void 0;\n  }\n\n  return {value: void 0, done: true};\n};\n\nCollection.extend = extend;\n\nexport default Collection;\n","// Backbone.View\n// -------------\n\nimport _ from 'underscore';\nimport $ from 'jQuery';\n\nimport Events from './Events';\nimport extend from './Utils/Extend';\n\n// Backbone Views are almost more convention than they are actual code. A View\n// is simply a JavaScript object that represents a logical chunk of UI in the\n// DOM. This might be a single item, an entire list, a sidebar or panel, or\n// even the surrounding frame which wraps your whole app. Defining a chunk of\n// UI as a **View** allows you to define your DOM events declaratively, without\n// having to worry about render order ... and makes it easy for the view to\n// react to specific changes in the state of your models.\n\n// Creating a Backbone.View creates its initial element outside of the DOM,\n// if an existing element is not provided...\nvar View = function(options) {\n  this.cid = _.uniqueId('view');\n  this.preinitialize.apply(this, arguments);\n  _.extend(this, _.pick(options, viewOptions));\n  this._ensureElement();\n  this.initialize.apply(this, arguments);\n};\n\n// Cached regex to split keys for `delegate`.\nvar delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n// List of view options to be set as properties.\nvar viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];\n\n// Set up all inheritable **Backbone.View** properties and methods.\n_.extend(View.prototype, Events, {\n\n  // The default `tagName` of a View's element is `\"div\"`.\n  tagName: 'div',\n\n  // jQuery delegate for element lookup, scoped to DOM elements within the\n  // current view. This should be preferred to global lookups where possible.\n  $: function(selector) {\n    return this.$el.find(selector);\n  },\n\n  // preinitialize is an empty function by default. You can override it with a function\n  // or object.  preinitialize will run before any instantiation logic is run in the View\n  preinitialize: function(){},\n\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic.\n  initialize: function(){},\n\n  // **render** is the core function that your view should override, in order\n  // to populate its element (`this.el`), with the appropriate HTML. The\n  // convention is for **render** to always return `this`.\n  render: function() {\n    return this;\n  },\n\n  // Remove this view by taking the element out of the DOM, and removing any\n  // applicable Backbone.Events listeners.\n  remove: function() {\n    this._removeElement();\n    this.stopListening();\n    return this;\n  },\n\n  // Remove this view's element from the document and all event listeners\n  // attached to it. Exposed for subclasses using an alternative DOM\n  // manipulation API.\n  _removeElement: function() {\n    this.$el.remove();\n  },\n\n  // Change the view's element (`this.el` property) and re-delegate the\n  // view's events on the new element.\n  setElement: function(element) {\n    this.undelegateEvents();\n    this._setElement(element);\n    this.delegateEvents();\n    return this;\n  },\n\n  // Creates the `this.el` and `this.$el` references for this view using the\n  // given `el`. `el` can be a CSS selector or an HTML string, a jQuery\n  // context or an element. Subclasses can override this to utilize an\n  // alternative DOM manipulation API and are only required to set the\n  // `this.el` property.\n  _setElement: function(el) {\n    this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);\n    this.el = this.$el[0];\n  },\n\n  // Set callbacks, where `this.events` is a hash of\n  //\n  // *{\"event selector\": \"callback\"}*\n  //\n  //     {\n  //       'mousedown .title':  'edit',\n  //       'click .button':     'save',\n  //       'click .open':       function(e) { ... }\n  //     }\n  //\n  // pairs. Callbacks will be bound to the view, with `this` set properly.\n  // Uses event delegation for efficiency.\n  // Omitting the selector binds the event to `this.el`.\n  delegateEvents: function(events) {\n    events || (events = _.result(this, 'events'));\n    if (!events) return this;\n    this.undelegateEvents();\n    for (var key in events) {\n      var method = events[key];\n      if (!_.isFunction(method)) method = this[method];\n      if (!method) continue;\n      var match = key.match(delegateEventSplitter);\n      this.delegate(match[1], match[2], _.bind(method, this));\n    }\n    return this;\n  },\n\n  // Add a single event listener to the view's element (or a child element\n  // using `selector`). This only works for delegate-able events: not `focus`,\n  // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.\n  delegate: function(eventName, selector, listener) {\n    this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);\n    return this;\n  },\n\n  // Clears all callbacks previously bound to the view by `delegateEvents`.\n  // You usually don't need to use this, but may wish to if you have multiple\n  // Backbone views attached to the same DOM element.\n  undelegateEvents: function() {\n    if (this.$el) this.$el.off('.delegateEvents' + this.cid);\n    return this;\n  },\n\n  // A finer-grained `undelegateEvents` for removing a single delegated event.\n  // `selector` and `listener` are both optional.\n  undelegate: function(eventName, selector, listener) {\n    this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);\n    return this;\n  },\n\n  // Produces a DOM element to be assigned to your view. Exposed for\n  // subclasses using an alternative DOM manipulation API.\n  _createElement: function(tagName) {\n    return document.createElement(tagName);\n  },\n\n  // Ensure that the View has a DOM element to render into.\n  // If `this.el` is a string, pass it through `$()`, take the first\n  // matching element, and re-assign it to `el`. Otherwise, create\n  // an element from the `id`, `className` and `tagName` properties.\n  _ensureElement: function() {\n    if (!this.el) {\n      var attrs = _.extend({}, _.result(this, 'attributes'));\n      if (this.id) attrs.id = _.result(this, 'id');\n      if (this.className) attrs['class'] = _.result(this, 'className');\n      this.setElement(this._createElement(_.result(this, 'tagName')));\n      this._setAttributes(attrs);\n    } else {\n      this.setElement(_.result(this, 'el'));\n    }\n  },\n\n  // Set attributes from a hash on this view's element.  Exposed for\n  // subclasses using an alternative DOM manipulation API.\n  _setAttributes: function(attributes) {\n    this.$el.attr(attributes);\n  }\n\n});\n\nView.extend = extend;\n\nexport default View;\n","//\n//  urlError\n//\n\n// Throw an error when a URL is needed, and none is supplied.\n\nvar urlError = function() {\n  throw new Error('A \"url\" property or function must be specified');\n};\n\nexport default urlError;\n","// BackboneJS.sync\n// ---------------\n\nimport _ from 'underscore';\n\nimport urlError from './utils/urlError';\n\n// Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option\n// will fake `\"PATCH\"`, `\"PUT\"` and `\"DELETE\"` requests via the `_method` parameter and\n// set a `X-Http-Method-Override` header.\nlet emulateHTTP = false;\n\n// Turn on `emulateJSON` to support legacy servers that can't deal with direct\n// `application/json` requests ... this will encode the body as\n// `application/x-www-form-urlencoded` instead and will send the model in a\n// form param named `model`.\nlet emulateJSON = false;\n\n// Map from CRUD to HTTP for our default `Backbone.sync` implementation.\n\nconst methodMap = {\n  create: 'POST',\n  update: 'PUT',\n  patch: 'PATCH',\n  delete: 'DELETE',\n  read: 'GET'\n};\n\n// Override this function to change the manner in which Backbone persists\n// models to the server. You will be passed the type of request, and the\n// model in question. By default, makes a RESTful Ajax request\n// to the model's `url()`. Some possible customizations could be:\n//\n// * Use `setTimeout` to batch rapid-fire updates into a single request.\n// * Send up the models as XML instead of JSON.\n// * Persist models via WebSockets instead of Ajax.\n//\n// Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n// as `POST`, with a `_method` parameter containing the true HTTP method,\n// as well as all requests with the body as `application/x-www-form-urlencoded`\n// instead of `application/json` with the model in a param named `model`.\n// Useful when interfacing with server-side languages like **PHP** that make\n// it difficult to read the body of `PUT` requests.\n\n// Backbone.sync\n// -------------\n\n// Override this function to change the manner in which Backbone persists\n// models to the server. You will be passed the type of request, and the\n// model in question. By default, makes a RESTful Ajax request\n// to the model's `url()`. Some possible customizations could be:\n//\n// * Use `setTimeout` to batch rapid-fire updates into a single request.\n// * Send up the models as XML instead of JSON.\n// * Persist models via WebSockets instead of Ajax.\n//\n// Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests\n// as `POST`, with a `_method` parameter containing the true HTTP method,\n// as well as all requests with the body as `application/x-www-form-urlencoded`\n// instead of `application/json` with the model in a param named `model`.\n// Useful when interfacing with server-side languages like **PHP** that make\n// it difficult to read the body of `PUT` requests.\nvar sync = function(method, model, options) {\n  var type = methodMap[method];\n\n  // Default options, unless specified.\n  _.defaults(options || (options = {}), {\n    emulateHTTP: Backbone.emulateHTTP,\n    emulateJSON: Backbone.emulateJSON\n  });\n\n  // Default JSON-request options.\n  var params = {type: type, dataType: 'json'};\n\n  // Ensure that we have a URL.\n  if (!options.url) {\n    params.url = _.result(model, 'url') || urlError();\n  }\n\n  // Ensure that we have the appropriate request data.\n  if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {\n    params.contentType = 'application/json';\n    params.data = JSON.stringify(options.attrs || model.toJSON(options));\n  }\n\n  // For older servers, emulate JSON by encoding the request into an HTML-form.\n  if (options.emulateJSON) {\n    params.contentType = 'application/x-www-form-urlencoded';\n    params.data = params.data ? {model: params.data} : {};\n  }\n\n  // For older servers, emulate HTTP by mimicking the HTTP method with `_method`\n  // And an `X-HTTP-Method-Override` header.\n  if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {\n    params.type = 'POST';\n    if (options.emulateJSON) params.data._method = type;\n    var beforeSend = options.beforeSend;\n    options.beforeSend = function(xhr) {\n      xhr.setRequestHeader('X-HTTP-Method-Override', type);\n      if (beforeSend) return beforeSend.apply(this, arguments);\n    };\n  }\n\n  // Don't process data on a non-GET request.\n  if (params.type !== 'GET' && !options.emulateJSON) {\n    params.processData = false;\n  }\n\n  // Pass along `textStatus` and `errorThrown` from jQuery.\n  var error = options.error;\n  options.error = function(xhr, textStatus, errorThrown) {\n    options.textStatus = textStatus;\n    options.errorThrown = errorThrown;\n    if (error) error.call(options.context, xhr, textStatus, errorThrown);\n  };\n\n  // Make the request, allowing the user to override any Ajax options.\n  var xhr = options.xhr = Backbone.ajax(_.extend(params, options));\n  model.trigger('request', model, xhr, options);\n  return xhr;\n};\n\nexport default sync;\n","//\n//\n//\n\nimport $ from 'jQuery';\n\n// Set the default implementation of `Backbone.ajax` to proxy through to `$`.\n// Override this if you'd like to use a different library.\nfunction ajax() {\n  return $.ajax.apply($, arguments);\n}\n\nexport default ajax;\n","// Backbone.Router\n// ---------------\n\nimport _ from 'underscore';\n\nimport Events from './Events';\nimport extend from './Utils/Extend';\n\n// Routers map faux-URLs to actions, and fire events when routes are\n// matched. Creating a new one sets its `routes` hash, if not set statically.\nvar Router = function(options) {\n  options || (options = {});\n  this.preinitialize.apply(this, arguments);\n  if (options.routes) this.routes = options.routes;\n  this._bindRoutes();\n  this.initialize.apply(this, arguments);\n};\n\n// Cached regular expressions for matching named param parts and splatted\n// parts of route strings.\nvar optionalParam = /\\((.*?)\\)/g;\nvar namedParam    = /(\\(\\?)?:\\w+/g;\nvar splatParam    = /\\*\\w+/g;\nvar escapeRegExp  = /[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;\n\n// Set up all inheritable **Backbone.Router** properties and methods.\n_.extend(Router.prototype, Events, {\n\n  // preinitialize is an empty function by default. You can override it with a function\n  // or object.  preinitialize will run before any instantiation logic is run in the Router.\n  preinitialize: function(){},\n\n  // Initialize is an empty function by default. Override it with your own\n  // initialization logic.\n  initialize: function(){},\n\n  // Manually bind a single named route to a callback. For example:\n  //\n  //     this.route('search/:query/p:num', 'search', function(query, num) {\n  //       ...\n  //     });\n  //\n  route: function(route, name, callback) {\n    if (!_.isRegExp(route)) route = this._routeToRegExp(route);\n    if (_.isFunction(name)) {\n      callback = name;\n      name = '';\n    }\n    if (!callback) callback = this[name];\n    var router = this;\n    Backbone.history.route(route, function(fragment) {\n      var args = router._extractParameters(route, fragment);\n      if (router.execute(callback, args, name) !== false) {\n        router.trigger.apply(router, ['route:' + name].concat(args));\n        router.trigger('route', name, args);\n        Backbone.history.trigger('route', router, name, args);\n      }\n    });\n    return this;\n  },\n\n  // Execute a route handler with the provided parameters.  This is an\n  // excellent place to do pre-route setup or post-route cleanup.\n  execute: function(callback, args, name) {\n    if (callback) callback.apply(this, args);\n  },\n\n  // Simple proxy to `Backbone.history` to save a fragment into the history.\n  navigate: function(fragment, options) {\n    Backbone.history.navigate(fragment, options);\n    return this;\n  },\n\n  // Bind all defined routes to `Backbone.history`. We have to reverse the\n  // order of the routes here to support behavior where the most general\n  // routes can be defined at the bottom of the route map.\n  _bindRoutes: function() {\n    if (!this.routes) return;\n    this.routes = _.result(this, 'routes');\n    var route, routes = _.keys(this.routes);\n    while ((route = routes.pop()) != null) {\n      this.route(route, this.routes[route]);\n    }\n  },\n\n  // Convert a route string into a regular expression, suitable for matching\n  // against the current location hash.\n  _routeToRegExp: function(route) {\n    route =  route.replace(escapeRegExp, '\\\\$&')\n                  .replace(optionalParam, '(?:$1)?')\n                  .replace(namedParam, function(match, optional) {\n                    return optional ? match : '([^/?]+)';\n                  })\n                  .replace(splatParam, '([^?]*?)');\n    return new RegExp('^' + route + '(?:\\\\?([\\\\s\\\\S]*))?$');\n  },\n\n  // Given a route, and a URL fragment that it matches, return the array of\n  // extracted decoded parameters. Empty or unmatched parameters will be\n  // treated as `null` to normalize cross-browser behavior.\n  _extractParameters: function(route, fragment) {\n    var params = route.exec(fragment).slice(1);\n    return _.map(params, function(param, i) {\n      // Don't decode the search params.\n      if (i === params.length - 1) return param || null;\n      return param ? decodeURIComponent(param) : null;\n    });\n  }\n\n});\n\nRouter.extend = extend;\n\nexport default Router;\n","// Backbone.History\n// ----------------\n\nimport _ from 'underscore';\n\nimport Events from './Events';\nimport extend from './Utils/Extend';\n\n// Handles cross-browser history management, based on either\n// [pushState](http://diveintohtml5.info/history.html) and real URLs, or\n// [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)\n// and URL fragments. If the browser supports neither (old IE, natch),\n// falls back to polling.\nvar History = function() {\n  this.handlers = [];\n  this.checkUrl = _.bind(this.checkUrl, this);\n\n  // Ensure that `History` can be used outside of the browser.\n  if (typeof window !== 'undefined') {\n    this.location = window.location;\n    this.history = window.history;\n  }\n};\n\n// Cached regex for stripping a leading hash/slash and trailing space.\nvar routeStripper = /^[#\\/]|\\s+$/g;\n\n// Cached regex for stripping leading and trailing slashes.\nvar rootStripper = /^\\/+|\\/+$/g;\n\n// Cached regex for stripping urls of hash.\nvar pathStripper = /#.*$/;\n\n// Has the history handling already been started?\nHistory.started = false;\n\n// Set up all inheritable **Backbone.History** properties and methods.\n_.extend(History.prototype, Events, {\n\n  // The default interval to poll for hash changes, if necessary, is\n  // twenty times a second.\n  interval: 50,\n\n  // Are we at the app root?\n  atRoot: function() {\n    var path = this.location.pathname.replace(/[^\\/]$/, '$&/');\n    return path === this.root && !this.getSearch();\n  },\n\n  // Does the pathname match the root?\n  matchRoot: function() {\n    var path = this.decodeFragment(this.location.pathname);\n    var rootPath = path.slice(0, this.root.length - 1) + '/';\n    return rootPath === this.root;\n  },\n\n  // Unicode characters in `location.pathname` are percent encoded so they're\n  // decoded for comparison. `%25` should not be decoded since it may be part\n  // of an encoded parameter.\n  decodeFragment: function(fragment) {\n    return decodeURI(fragment.replace(/%25/g, '%2525'));\n  },\n\n  // In IE6, the hash fragment and search params are incorrect if the\n  // fragment contains `?`.\n  getSearch: function() {\n    var match = this.location.href.replace(/#.*/, '').match(/\\?.+/);\n    return match ? match[0] : '';\n  },\n\n  // Gets the true hash value. Cannot use location.hash directly due to bug\n  // in Firefox where location.hash will always be decoded.\n  getHash: function(window) {\n    var match = (window || this).location.href.match(/#(.*)$/);\n    return match ? match[1] : '';\n  },\n\n  // Get the pathname and search params, without the root.\n  getPath: function() {\n    var path = this.decodeFragment(\n      this.location.pathname + this.getSearch()\n    ).slice(this.root.length - 1);\n    return path.charAt(0) === '/' ? path.slice(1) : path;\n  },\n\n  // Get the cross-browser normalized URL fragment from the path or hash.\n  getFragment: function(fragment) {\n    if (fragment == null) {\n      if (this._usePushState || !this._wantsHashChange) {\n        fragment = this.getPath();\n      } else {\n        fragment = this.getHash();\n      }\n    }\n    return fragment.replace(routeStripper, '');\n  },\n\n  // Start the hash change handling, returning `true` if the current URL matches\n  // an existing route, and `false` otherwise.\n  start: function(options) {\n    if (History.started) throw new Error('Backbone.history has already been started');\n    History.started = true;\n\n    // Figure out the initial configuration. Do we need an iframe?\n    // Is pushState desired ... is it available?\n    this.options          = _.extend({root: '/'}, this.options, options);\n    this.root             = this.options.root;\n    this._wantsHashChange = this.options.hashChange !== false;\n    this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);\n    this._useHashChange   = this._wantsHashChange && this._hasHashChange;\n    this._wantsPushState  = !!this.options.pushState;\n    this._hasPushState    = !!(this.history && this.history.pushState);\n    this._usePushState    = this._wantsPushState && this._hasPushState;\n    this.fragment         = this.getFragment();\n\n    // Normalize root to always include a leading and trailing slash.\n    this.root = ('/' + this.root + '/').replace(rootStripper, '/');\n\n    // Transition from hashChange to pushState or vice versa if both are\n    // requested.\n    if (this._wantsHashChange && this._wantsPushState) {\n\n      // If we've started off with a route from a `pushState`-enabled\n      // browser, but we're currently in a browser that doesn't support it...\n      if (!this._hasPushState && !this.atRoot()) {\n        var rootPath = this.root.slice(0, -1) || '/';\n        this.location.replace(rootPath + '#' + this.getPath());\n        // Return immediately as browser will do redirect to new url\n        return true;\n\n      // Or if we've started out with a hash-based route, but we're currently\n      // in a browser where it could be `pushState`-based instead...\n      } else if (this._hasPushState && this.atRoot()) {\n        this.navigate(this.getHash(), {replace: true});\n      }\n\n    }\n\n    // Proxy an iframe to handle location events if the browser doesn't\n    // support the `hashchange` event, HTML5 history, or the user wants\n    // `hashChange` but not `pushState`.\n    if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {\n      this.iframe = document.createElement('iframe');\n      this.iframe.src = 'javascript:0';\n      this.iframe.style.display = 'none';\n      this.iframe.tabIndex = -1;\n      var body = document.body;\n      // Using `appendChild` will throw on IE < 9 if the document is not ready.\n      var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;\n      iWindow.document.open();\n      iWindow.document.close();\n      iWindow.location.hash = '#' + this.fragment;\n    }\n\n    // Add a cross-platform `addEventListener` shim for older browsers.\n    var addEventListener = window.addEventListener || function(eventName, listener) {\n      return attachEvent('on' + eventName, listener);\n    };\n\n    // Depending on whether we're using pushState or hashes, and whether\n    // 'onhashchange' is supported, determine how we check the URL state.\n    if (this._usePushState) {\n      addEventListener('popstate', this.checkUrl, false);\n    } else if (this._useHashChange && !this.iframe) {\n      addEventListener('hashchange', this.checkUrl, false);\n    } else if (this._wantsHashChange) {\n      this._checkUrlInterval = setInterval(this.checkUrl, this.interval);\n    }\n\n    if (!this.options.silent) return this.loadUrl();\n  },\n\n  // Disable Backbone.history, perhaps temporarily. Not useful in a real app,\n  // but possibly useful for unit testing Routers.\n  stop: function() {\n    // Add a cross-platform `removeEventListener` shim for older browsers.\n    var removeEventListener = window.removeEventListener || function(eventName, listener) {\n      return detachEvent('on' + eventName, listener);\n    };\n\n    // Remove window listeners.\n    if (this._usePushState) {\n      removeEventListener('popstate', this.checkUrl, false);\n    } else if (this._useHashChange && !this.iframe) {\n      removeEventListener('hashchange', this.checkUrl, false);\n    }\n\n    // Clean up the iframe if necessary.\n    if (this.iframe) {\n      document.body.removeChild(this.iframe);\n      this.iframe = null;\n    }\n\n    // Some environments will throw when clearing an undefined interval.\n    if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);\n    History.started = false;\n  },\n\n  // Add a route to be tested when the fragment changes. Routes added later\n  // may override previous routes.\n  route: function(route, callback) {\n    this.handlers.unshift({route: route, callback: callback});\n  },\n\n  // Checks the current URL to see if it has changed, and if it has,\n  // calls `loadUrl`, normalizing across the hidden iframe.\n  checkUrl: function(e) {\n    var current = this.getFragment();\n\n    // If the user pressed the back button, the iframe's hash will have\n    // changed and we should use that for comparison.\n    if (current === this.fragment && this.iframe) {\n      current = this.getHash(this.iframe.contentWindow);\n    }\n\n    if (current === this.fragment) return false;\n    if (this.iframe) this.navigate(current);\n    this.loadUrl();\n  },\n\n  // Attempt to load the current URL fragment. If a route succeeds with a\n  // match, returns `true`. If no defined routes matches the fragment,\n  // returns `false`.\n  loadUrl: function(fragment) {\n    // If the root doesn't match, no routes can match either.\n    if (!this.matchRoot()) return false;\n    fragment = this.fragment = this.getFragment(fragment);\n    return _.some(this.handlers, function(handler) {\n      if (handler.route.test(fragment)) {\n        handler.callback(fragment);\n        return true;\n      }\n    });\n  },\n\n  // Save a fragment into the hash history, or replace the URL state if the\n  // 'replace' option is passed. You are responsible for properly URL-encoding\n  // the fragment in advance.\n  //\n  // The options object can contain `trigger: true` if you wish to have the\n  // route callback be fired (not usually desirable), or `replace: true`, if\n  // you wish to modify the current URL without adding an entry to the history.\n  navigate: function(fragment, options) {\n    if (!History.started) return false;\n    if (!options || options === true) options = {trigger: !!options};\n\n    // Normalize the fragment.\n    fragment = this.getFragment(fragment || '');\n\n    // Don't include a trailing slash on the root.\n    var rootPath = this.root;\n    if (fragment === '' || fragment.charAt(0) === '?') {\n      rootPath = rootPath.slice(0, -1) || '/';\n    }\n    var url = rootPath + fragment;\n\n    // Strip the fragment of the query and hash for matching.\n    fragment = fragment.replace(pathStripper, '');\n\n    // Decode for matching.\n    var decodedFragment = this.decodeFragment(fragment);\n\n    if (this.fragment === decodedFragment) return;\n    this.fragment = decodedFragment;\n\n    // If pushState is available, we use it to set the fragment as a real URL.\n    if (this._usePushState) {\n      this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);\n\n    // If hash changes haven't been explicitly disabled, update the hash\n    // fragment to store history.\n    } else if (this._wantsHashChange) {\n      this._updateHash(this.location, fragment, options.replace);\n      if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {\n        var iWindow = this.iframe.contentWindow;\n\n        // Opening and closing the iframe tricks IE7 and earlier to push a\n        // history entry on hash-tag change.  When replace is true, we don't\n        // want this.\n        if (!options.replace) {\n          iWindow.document.open();\n          iWindow.document.close();\n        }\n\n        this._updateHash(iWindow.location, fragment, options.replace);\n      }\n\n    // If you've told us that you explicitly don't want fallback hashchange-\n    // based history, then `navigate` becomes a page refresh.\n    } else {\n      return this.location.assign(url);\n    }\n    if (options.trigger) return this.loadUrl(fragment);\n  },\n\n  // Update the hash location, either replacing the current entry, or adding\n  // a new one to the browser history.\n  _updateHash: function(location, fragment, replace) {\n    if (replace) {\n      var href = location.href.replace(/(javascript:|#).*$/, '');\n      location.replace(href + '#' + fragment);\n    } else {\n      // Some browsers require that `hash` contains a leading #.\n      location.hash = '#' + fragment;\n    }\n  }\n\n});\n\nHistory.extend = extend;\n\nexport default History;\n","//\n//  BackboneJS.js - BackboneJS Framework.\n//\n//  Copyright (c) 2010-2017 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//  Copyright (c) 2017 Aaron Nathaniel Gray\n//  Distributed under the MIT License\n//\n\nimport _ from 'underscore';\nimport $ from 'jQuery';\n\nimport {version} from '../package.json';\n\nimport Events from './Events';\n\nimport Model from './Model';\nimport Collection from './Collection';\n\nimport View from './View';\n\nimport sync from './Sync';\nimport ajax from './AJAX';\n\nimport Router from './Router';\n\nimport History from './History';\nimport history from './History';\n\n//import urlError from './Utils/urlError';\n//import wrapError from './Utils/wrapError';\n\nvar Backbone = {};\nBackbone.VERSION = version;\n\nBackbone._ = _;\nBackbone.$ = $;\n\n// ------------------------------------------------------------------------- //\n// Allow the `Backbone` object to serve as a global event bus, for folks who\n// want global \"pubsub\" in a convenient place.\n\nBackbone.Events = Events;\n_.extend(Backbone, Events);\n\nBackbone.Model = Model;\nBackbone.View = View;\n\n// Proxy Backbone class methods to Underscore functions, wrapping the model's\n// `attributes` object or collection's `models` array behind the scenes.\n//\n// collection.filter(function(model) { return model.get('age') > 10 });\n// collection.each(this.addView);\n//\n// `Function#apply` can be slow so we use the method's arg count, if we know it.\nvar addMethod = function(base, length, method, attribute) {\n  switch (length) {\n    case 1: return function() {\n      return base[method](this[attribute]);\n    };\n    case 2: return function(value) {\n      return base[method](this[attribute], value);\n    };\n    case 3: return function(iteratee, context) {\n      return base[method](this[attribute], cb(iteratee, this), context);\n    };\n    case 4: return function(iteratee, defaultVal, context) {\n      return base[method](this[attribute], cb(iteratee, this), defaultVal, context);\n    };\n    default: return function() {\n      var args = Array.prototype.slice.call(arguments);\n      args.unshift(this[attribute]);\n      return base[method].apply(base, args);\n    };\n  }\n};\n\nvar addUnderscoreMethods = function(Class, base, methods, attribute) {\n  _.each(methods, function(length, method) {\n    if (base[method]) Class.prototype[method] = addMethod(base, length, method, attribute);\n  });\n};\n\n// Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.\nvar cb = function(iteratee, instance) {\n  if (_.isFunction(iteratee)) return iteratee;\n  if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);\n  if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };\n  return iteratee;\n};\nvar modelMatcher = function(attrs) {\n  var matcher = _.matches(attrs);\n  return function(model) {\n    return matcher(model.attributes);\n  };\n};\n\n// Underscore methods that we want to implement on the Collection.\n// 90% of the core usefulness of Backbone Collections is actually implemented\n// right here:\nvar collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,\n  foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,\n  select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,\n  contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,\n  head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,\n  without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,\n  isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,\n  sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};\n\n\n// Underscore methods that we want to implement on the Model, mapped to the\n// number of arguments they take.\nvar modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,\n  omit: 0, chain: 1, isEmpty: 1};\n\n// Mix in each Underscore method as a proxy to `Collection#models`.\n\n_.each([\n  [Collection, collectionMethods, 'models'],\n  [Model, modelMethods, 'attributes']\n], function(config) {\n  var Base = config[0],\n      methods = config[1],\n      attribute = config[2];\n\n  Base.mixin = function(obj) {\n    var mappings = _.reduce(_.functions(obj), function(memo, name) {\n      memo[name] = 0;\n      return memo;\n    }, {});\n    addUnderscoreMethods(Base, obj, mappings, attribute);\n  };\n\n  addUnderscoreMethods(Base, _, methods, attribute);\n});\n\nBackbone.Model = Model;\nBackbone.View = View;\nBackbone.Collection = Collection;\nBackbone.Router = Router;\n\nBackbone.sync = sync;\nBackbone.ajax = ajax;\n\nBackbone.History = History;\n// Create the default Backbone.history.\nBackbone.history = new History;\n\nexport default Backbone;\n"],"names":["Events","eventSplitter","_listening","eventsApi","iteratee","events","name","callback","opts","i","names","context","_","keys","length","test","split","on","_events","onApi","listeners","_listeners","id","interop","listenTo","obj","_listenId","uniqueId","listeningTo","_listeningTo","listening","Listening","error","tryCatchOn","options","handlers","ctx","count","push","e","off","offApi","stopListening","ids","isEmpty","cleanup","remaining","j","handler","_callback","once","onceMap","bind","listenToOnce","map","offer","apply","arguments","trigger","Math","max","args","Array","triggerApi","objEvents","allEvents","all","slice","triggerEvents","concat","ev","l","a1","a2","a3","call","listener","prototype","unbind","wrapError","model","resp","urlError","Error","extend","protoProps","staticProps","parent","child","has","constructor","create","__super__","Model","attributes","attrs","preinitialize","cid","cidPrefix","collection","parse","defaults","result","set","changed","initialize","clone","Backbone","sync","attr","escape","get","key","val","_validate","unset","silent","changes","changing","_changing","_previousAttributes","current","prev","isEqual","idAttribute","_pending","diff","hasChanged","old","success","serverAttrs","validate","wait","method","isNew","patch","xhr","destroy","defer","base","replace","encodeURIComponent","validationError","Collection","models","comparator","_reset","reset","setOptions","add","remove","merge","addOptions","splice","array","insert","at","min","tail","toJSON","singular","isArray","removed","_removeModels","added","merged","_isModel","toAdd","toMerge","toRemove","modelMap","sort","sortable","sortAttr","isString","existing","_prepareModel","_addReference","orderChanged","some","m","index","_removeReference","previousModels","_byId","modelId","first","where","isFunction","sortBy","callbackOpts","save","CollectionIterator","ITERATOR_VALUES","ITERATOR_KEYS","ITERATOR_KEYSVALUES","indexOf","_onModelEvent","event","prevId","previousAttributes","$$iterator","Symbol","iterator","values","kind","_collection","_kind","_index","next","value","done","View","pick","viewOptions","_ensureElement","delegateEventSplitter","selector","$el","find","_removeElement","element","undelegateEvents","_setElement","delegateEvents","el","$","match","delegate","eventName","tagName","document","createElement","className","setElement","_createElement","_setAttributes","methodMap","type","emulateHTTP","emulateJSON","params","dataType","url","data","contentType","JSON","stringify","_method","beforeSend","setRequestHeader","processData","textStatus","errorThrown","ajax","Router","routes","_bindRoutes","optionalParam","namedParam","splatParam","escapeRegExp","route","isRegExp","_routeToRegExp","router","history","fragment","_extractParameters","execute","navigate","pop","optional","RegExp","exec","param","decodeURIComponent","History","checkUrl","window","location","routeStripper","rootStripper","pathStripper","started","path","pathname","root","getSearch","decodeFragment","rootPath","decodeURI","href","charAt","_usePushState","_wantsHashChange","getPath","getHash","hashChange","_hasHashChange","documentMode","_useHashChange","_wantsPushState","pushState","_hasPushState","getFragment","atRoot","iframe","src","style","display","tabIndex","body","iWindow","insertBefore","firstChild","contentWindow","open","close","hash","addEventListener","attachEvent","_checkUrlInterval","setInterval","interval","loadUrl","removeEventListener","detachEvent","removeChild","clearInterval","unshift","matchRoot","decodedFragment","title","_updateHash","assign","VERSION","version","addMethod","attribute","cb","defaultVal","addUnderscoreMethods","Class","methods","each","instance","isObject","modelMatcher","matcher","matches","collectionMethods","forEach","collect","reduce","inject","reduceRight","foldr","detect","filter","reject","every","any","include","includes","invoke","toArray","size","take","initial","rest","drop","last","difference","shuffle","lastIndexOf","chain","sample","partition","groupBy","countBy","indexBy","findIndex","findLastIndex","modelMethods","pairs","invert","config","Base","mixin","mappings","functions","memo"],"mappings":"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"}